{"version":3,"sources":["firebase.js","image1.jpg","components/User.js","components/svg/Attachment.js","components/MessageForm.js","components/Message.js","pages/Home.js","components/Loading.js","context/auth.js","components/Navbar.js","pages/Register.js","pages/Login.js","components/svg/Camera.js","components/svg/Delete.js","pages/Profile.js","components/PrivateRoute.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","db","getFirestore","storage","getStorage","User","user1","user","selectUser","chat","user2","uid","useState","data","setData","useEffect","id","unsub","onSnapshot","doc","className","name","onClick","src","avatar","Img","alt","from","unread","isOnline","text","Attachment","xmlns","style","width","height","cursor","color","viewBox","fill","fillRule","d","clipRule","MessageForm","handleSubmit","setText","setImg","onSubmit","htmlFor","onChange","e","target","files","type","accept","display","placeholder","value","Message","msg","scrollRef","useRef","current","scrollIntoView","behavior","ref","media","fromNow","createdAt","toDate","Home","users","setUsers","setChat","img","msgs","setMsgs","currentUser","usersRef","collection","q","query","where","querySnapshot","forEach","push","a","msgsRef","orderBy","getDoc","docSnap","updateDoc","preventDefault","imgRef","Date","getTime","uploadBytes","snap","getDownloadURL","fullPath","dlUrl","url","addDoc","to","Timestamp","fromDate","setDoc","map","length","i","Loading","position","top","left","transform","AuthContext","createContext","AuthProvider","children","setUser","loading","setLoading","onAuthStateChanged","Provider","Navbar","history","useHistory","useContext","handleSignout","signOut","replace","Register","email","password","error","handleChange","createUserWithEmailAndPassword","result","message","disabled","Login","signInWithEmailAndPassword","Camera","Delete","deleteImage","Profile","then","exists","uploadImg","avatarPath","deleteObject","console","log","window","confirm","toDateString","PrivateRoute","Component","component","rest","exact","render","props","App","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.12e26289.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCQkuSPCHV05rN3mK3Abg-eWUYl5FcGq8k\",\n  authDomain: \"chatapp01-d2ca2.firebaseapp.com\",\n  projectId: \"chatapp01-d2ca2\",\n  storageBucket: \"chatapp01-d2ca2.appspot.com\",\n  messagingSenderId: \"118836018874\",\n  appId: \"1:118836018874:web:0f93ef663b114e46b9cc83\",\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst storage = getStorage(app);\n\nexport { auth, db, storage };\n","export default __webpack_public_path__ + \"static/media/image1.f02b66c0.jpg\";","import React, { useEffect, useState } from \"react\";\nimport Img from \"../image1.jpg\";\nimport { onSnapshot, doc } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\n\nconst User = ({ user1, user, selectUser, chat }) => {\n  const user2 = user?.uid;\n  const [data, setData] = useState(\"\");\n\n  useEffect(() => {\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\n    let unsub = onSnapshot(doc(db, \"lastMsg\", id), (doc) => {\n      setData(doc.data());\n    });\n    return () => unsub();\n  }, []);\n\n  return (\n    <>\n      <div\n        className={`user_wrapper ${chat.name === user.name && \"selected_user\"}`}\n        onClick={() => selectUser(user)}\n      >\n        <div className=\"user_info\">\n          <div className=\"user_detail\">\n            <img src={user.avatar || Img} alt=\"avatar\" className=\"avatar\" />\n            <h4>{user.name}</h4>\n            {data?.from !== user1 && data?.unread && (\n              <small className=\"unread\">New</small>\n            )}\n          </div>\n          <div\n            className={`user_status ${user.isOnline ? \"online\" : \"offline\"}`}\n          ></div>\n        </div>\n        {data && (\n          <p className=\"truncate\">\n            <strong>{data.from === user1 ? \"Me:\" : null}</strong>\n            {data.text}\n          </p>\n        )}\n      </div>\n      <div\n        onClick={() => selectUser(user)}\n        className={`sm_container ${chat.name === user.name && \"selected_user\"}`}\n      >\n        <img\n          src={user.avatar || Img}\n          alt=\"avatar\"\n          className=\"avatar sm_screen\"\n        />\n      </div>\n    </>\n  );\n};\n\nexport default User;\n","import React from \"react\";\n\nconst Attachment = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      style={{\n        width: \"25px\",\n        height: \"25px\",\n        cursor: \"pointer\",\n        color: \"gray\",\n      }}\n      viewBox=\"0 0 20 20\"\n      fill=\"currentColor\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z\"\n        clipRule=\"evenodd\"\n      />\n    </svg>\n  );\n};\n\nexport default Attachment;\n","import React from \"react\";\nimport Attachment from \"./svg/Attachment\";\n\nconst MessageForm = ({ handleSubmit, text, setText, setImg }) => {\n  return (\n    <form className=\"message_form\" onSubmit={handleSubmit}>\n      <label htmlFor=\"img\">\n        <Attachment />\n      </label>\n      <input\n        onChange={(e) => setImg(e.target.files[0])}\n        type=\"file\"\n        id=\"img\"\n        accept=\"image/*\"\n        style={{ display: \"none\" }}\n      />\n      <div>\n        <input\n          type=\"text\"\n          placeholder=\"Enter message\"\n          value={text}\n          onChange={(e) => setText(e.target.value)}\n        />\n      </div>\n      <div>\n        <button className=\"btn\">Send</button>\n      </div>\n    </form>\n  );\n};\n\nexport default MessageForm;\n","import React, { useRef, useEffect } from \"react\";\nimport Moment from \"react-moment\";\n\nconst Message = ({ msg, user1 }) => {\n  const scrollRef = useRef();\n\n  useEffect(() => {\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [msg]);\n  return (\n    <div\n      className={`message_wrapper ${msg.from === user1 ? \"own\" : \"\"}`}\n      ref={scrollRef}\n    >\n      <p className={msg.from === user1 ? \"me\" : \"friend\"}>\n        {msg.media ? <img src={msg.media} alt={msg.text} /> : null}\n        {msg.text}\n        <br />\n        <small>\n          <Moment fromNow>{msg.createdAt.toDate()}</Moment>\n        </small>\n      </p>\n    </div>\n  );\n};\n\nexport default Message;\n","import React, { useEffect, useState } from \"react\";\nimport { db, auth, storage } from \"../firebase\";\nimport {\n  collection,\n  query,\n  where,\n  onSnapshot,\n  addDoc,\n  Timestamp,\n  orderBy,\n  setDoc,\n  doc,\n  getDoc,\n  updateDoc,\n} from \"firebase/firestore\";\nimport { ref, getDownloadURL, uploadBytes } from \"firebase/storage\";\nimport User from \"../components/User\";\nimport MessageForm from \"../components/MessageForm\";\nimport Message from \"../components/Message\";\n\nconst Home = () => {\n  const [users, setUsers] = useState([]);\n  const [chat, setChat] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [img, setImg] = useState(\"\");\n  const [msgs, setMsgs] = useState([]);\n\n  const user1 = auth.currentUser.uid;\n\n  useEffect(() => {\n    const usersRef = collection(db, \"users\");\n    // create query object\n    const q = query(usersRef, where(\"uid\", \"not-in\", [user1]));\n    // execute query\n    const unsub = onSnapshot(q, (querySnapshot) => {\n      let users = [];\n      querySnapshot.forEach((doc) => {\n        users.push(doc.data());\n      });\n      setUsers(users);\n    });\n    return () => unsub();\n  }, []);\n\n  const selectUser = async (user) => {\n    setChat(user);\n\n    const user2 = user.uid;\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\n\n    const msgsRef = collection(db, \"messages\", id, \"chat\");\n    const q = query(msgsRef, orderBy(\"createdAt\", \"asc\"));\n\n    onSnapshot(q, (querySnapshot) => {\n      let msgs = [];\n      querySnapshot.forEach((doc) => {\n        msgs.push(doc.data());\n      });\n      setMsgs(msgs);\n    });\n\n    // get last message b/w logged in user and selected user\n    const docSnap = await getDoc(doc(db, \"lastMsg\", id));\n    // if last message exists and message is from selected user\n    if (docSnap.data() && docSnap.data().from !== user1) {\n      // update last message doc, set unread to false\n      await updateDoc(doc(db, \"lastMsg\", id), { unread: false });\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const user2 = chat.uid;\n\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\n\n    let url;\n    if (img) {\n      const imgRef = ref(\n        storage,\n        `images/${new Date().getTime()} - ${img.name}`\n      );\n      const snap = await uploadBytes(imgRef, img);\n      const dlUrl = await getDownloadURL(ref(storage, snap.ref.fullPath));\n      url = dlUrl;\n    }\n\n    await addDoc(collection(db, \"messages\", id, \"chat\"), {\n      text,\n      from: user1,\n      to: user2,\n      createdAt: Timestamp.fromDate(new Date()),\n      media: url || \"\",\n    });\n\n    await setDoc(doc(db, \"lastMsg\", id), {\n      text,\n      from: user1,\n      to: user2,\n      createdAt: Timestamp.fromDate(new Date()),\n      media: url || \"\",\n      unread: true,\n    });\n\n    setText(\"\");\n    setImg(\"\");\n  };\n  return (\n    <div className=\"home_container\">\n      <div className=\"users_container\">\n        {users.map((user) => (\n          <User\n            key={user.uid}\n            user={user}\n            selectUser={selectUser}\n            user1={user1}\n            chat={chat}\n          />\n        ))}\n      </div>\n      <div className=\"messages_container\">\n        {chat ? (\n          <>\n            <div className=\"messages_user\">\n              <h3>{chat.name}</h3>\n            </div>\n            <div className=\"messages\">\n              {msgs.length\n                ? msgs.map((msg, i) => (\n                    <Message key={i} msg={msg} user1={user1} />\n                  ))\n                : null}\n            </div>\n            <MessageForm\n              handleSubmit={handleSubmit}\n              text={text}\n              setText={setText}\n              setImg={setImg}\n            />\n          </>\n        ) : (\n          <h3 className=\"no_conv\">Select a user to start conversation</h3>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\n\nconst Loading = () => {\n  return (\n    <div style={{ position: \"relative\" }}>\n      <h2\n        style={{\n          position: \"fixed\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n        }}\n      >\n        Loading...\n      </h2>\n    </div>\n  );\n};\n\nexport default Loading;\n","import { createContext, useEffect, useState } from \"react\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth } from \"../firebase\";\nimport Loading from \"../components/Loading\";\n\nexport const AuthContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    onAuthStateChanged(auth, (user) => {\n      setUser(user);\n      setLoading(false);\n    });\n  }, []);\n  if (loading) {\n    return <Loading />;\n  }\n  return (\n    <AuthContext.Provider value={{ user }}>{children}</AuthContext.Provider>\n  );\n};\n\nexport default AuthProvider;\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { auth, db } from \"../firebase\";\nimport { signOut } from \"firebase/auth\";\nimport { updateDoc, doc } from \"firebase/firestore\";\nimport { AuthContext } from \"../context/auth\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Navbar = () => {\n  const history = useHistory();\n  const { user } = useContext(AuthContext);\n\n  const handleSignout = async () => {\n    await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\n      isOnline: false,\n    });\n    await signOut(auth);\n    history.replace(\"/login\");\n  };\n  return (\n    <nav>\n      <h3>\n        <Link to=\"/\">Messenger</Link>\n      </h3>\n      <div>\n        {user ? (\n          <>\n            <Link to=\"/profile\">Profile</Link>\n            <button className=\"btn\" onClick={handleSignout}>\n              Logout\n            </button>\n          </>\n        ) : (\n          <>\n            <Link to=\"/register\">Register</Link>\n            <Link to=\"/login\">Login</Link>\n          </>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n","import React, { useState } from \"react\";\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { auth, db } from \"../firebase\";\nimport { setDoc, doc, Timestamp } from \"firebase/firestore\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Register = () => {\n  const [data, setData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    error: null,\n    loading: false,\n  });\n\n  const history = useHistory();\n\n  const { name, email, password, error, loading } = data;\n\n  const handleChange = (e) => {\n    setData({ ...data, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setData({ ...data, error: null, loading: true });\n    if (!name || !email || !password) {\n      setData({ ...data, error: \"All fields are required\" });\n    }\n    try {\n      const result = await createUserWithEmailAndPassword(\n        auth,\n        email,\n        password\n      );\n      await setDoc(doc(db, \"users\", result.user.uid), {\n        uid: result.user.uid,\n        name,\n        email,\n        createdAt: Timestamp.fromDate(new Date()),\n        isOnline: true,\n      });\n      setData({\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        error: null,\n        loading: false,\n      });\n      history.replace(\"/\");\n    } catch (err) {\n      setData({ ...data, error: err.message, loading: false });\n    }\n  };\n  return (\n    <section>\n      <h3>Create An Account</h3>\n      <form className=\"form\" onSubmit={handleSubmit}>\n        <div className=\"input_container\">\n          <label htmlFor=\"name\">Name</label>\n          <input type=\"text\" name=\"name\" value={name} onChange={handleChange} />\n        </div>\n        <div className=\"input_container\">\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"text\"\n            name=\"email\"\n            value={email}\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"input_container\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={handleChange}\n          />\n        </div>\n        {error ? <p className=\"error\">{error}</p> : null}\n        <div className=\"btn_container\">\n          <button className=\"btn\" disabled={loading}>\n            {loading ? \"Creating ...\" : \"Register\"}\n          </button>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default Register;\n","import React, { useState } from \"react\";\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\nimport { auth, db } from \"../firebase\";\nimport { updateDoc, doc } from \"firebase/firestore\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = () => {\n  const [data, setData] = useState({\n    email: \"\",\n    password: \"\",\n    error: null,\n    loading: false,\n  });\n\n  const history = useHistory();\n\n  const { email, password, error, loading } = data;\n\n  const handleChange = (e) => {\n    setData({ ...data, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setData({ ...data, error: null, loading: true });\n    if (!email || !password) {\n      setData({ ...data, error: \"All fields are required\" });\n    }\n    try {\n      const result = await signInWithEmailAndPassword(auth, email, password);\n\n      await updateDoc(doc(db, \"users\", result.user.uid), {\n        isOnline: true,\n      });\n      setData({\n        email: \"\",\n        password: \"\",\n        error: null,\n        loading: false,\n      });\n      history.replace(\"/\");\n    } catch (err) {\n      setData({ ...data, error: err.message, loading: false });\n    }\n  };\n  return (\n    <section>\n      <h3>Log into your Account</h3>\n      <form className=\"form\" onSubmit={handleSubmit}>\n        <div className=\"input_container\">\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"text\"\n            name=\"email\"\n            value={email}\n            onChange={handleChange}\n          />\n        </div>\n        <div className=\"input_container\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={handleChange}\n          />\n        </div>\n        {error ? <p className=\"error\">{error}</p> : null}\n        <div className=\"btn_container\">\n          <button className=\"btn\" disabled={loading}>\n            {loading ? \"Logging in ...\" : \"Login\"}\n          </button>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\n\nconst Camera = () => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      style={{ width: \"25px\", height: \"25px\", cursor: \"pointer\" }}\n      viewBox=\"0 0 20 20\"\n      fill=\"currentColor\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        d=\"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z\"\n        clipRule=\"evenodd\"\n      />\n    </svg>\n  );\n};\n\nexport default Camera;\n","import React from \"react\";\n\nconst Delete = ({ deleteImage }) => {\n  return (\n    <svg\n      onClick={deleteImage}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      style={{\n        width: \"25px\",\n        height: \"25px\",\n        cursor: \"pointer\",\n        color: \"#f24957\",\n      }}\n      viewBox=\"0 0 20 20\"\n      fill=\"currentColor\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\"\n        clipRule=\"evenodd\"\n      />\n    </svg>\n  );\n};\n\nexport default Delete;\n","import React, { useState, useEffect } from \"react\";\nimport Camera from \"../components/svg/Camera\";\nimport Img from \"../image1.jpg\";\nimport { storage, db, auth } from \"../firebase\";\nimport {\n  ref,\n  getDownloadURL,\n  uploadBytes,\n  deleteObject,\n} from \"firebase/storage\";\nimport { getDoc, doc, updateDoc } from \"firebase/firestore\";\nimport Delete from \"../components/svg/Delete\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Profile = () => {\n  const [img, setImg] = useState(\"\");\n  const [user, setUser] = useState();\n  const history = useHistory(\"\");\n\n  useEffect(() => {\n    getDoc(doc(db, \"users\", auth.currentUser.uid)).then((docSnap) => {\n      if (docSnap.exists) {\n        setUser(docSnap.data());\n      }\n    });\n\n    if (img) {\n      const uploadImg = async () => {\n        const imgRef = ref(\n          storage,\n          `avatar/${new Date().getTime()} - ${img.name}`\n        );\n        try {\n          if (user.avatarPath) {\n            await deleteObject(ref(storage, user.avatarPath));\n          }\n          const snap = await uploadBytes(imgRef, img);\n          const url = await getDownloadURL(ref(storage, snap.ref.fullPath));\n\n          await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\n            avatar: url,\n            avatarPath: snap.ref.fullPath,\n          });\n\n          setImg(\"\");\n        } catch (err) {\n          console.log(err.message);\n        }\n      };\n      uploadImg();\n    }\n  }, [img]);\n\n  const deleteImage = async () => {\n    try {\n      const confirm = window.confirm(\"Delete avatar?\");\n      if (confirm) {\n        await deleteObject(ref(storage, user.avatarPath));\n\n        await updateDoc(doc(db, \"users\", auth.currentUser.uid), {\n          avatar: \"\",\n          avatarPath: \"\",\n        });\n        history.replace(\"/\");\n      }\n    } catch (err) {\n      console.log(err.message);\n    }\n  };\n  return user ? (\n    <section>\n      <div className=\"profile_container\">\n        <div className=\"img_container\">\n          <img src={user.avatar || Img} alt=\"avatar\" />\n          <div className=\"overlay\">\n            <div>\n              <label htmlFor=\"photo\">\n                <Camera />\n              </label>\n              {user.avatar ? <Delete deleteImage={deleteImage} /> : null}\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                style={{ display: \"none\" }}\n                id=\"photo\"\n                onChange={(e) => setImg(e.target.files[0])}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"text_container\">\n          <h3>{user.name}</h3>\n          <p>{user.email}</p>\n          <hr />\n          <small>Joined on: {user.createdAt.toDate().toDateString()}</small>\n        </div>\n      </div>\n    </section>\n  ) : null;\n};\n\nexport default Profile;\n","import React, { useContext } from \"react\";\nimport { AuthContext } from \"../context/auth\";\nimport { Redirect, Route } from \"react-router-dom\";\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  const { user } = useContext(AuthContext);\n\n  return (\n    <Route\n      {...rest}\n      exact\n      render={(props) =>\n        user ? <Component {...props} /> : <Redirect to=\"/login\" />\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import \"./App.css\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Navbar from \"./components/Navbar\";\nimport Register from \"./pages/Register\";\nimport Login from \"./pages/Login\";\nimport Profile from './pages/Profile'\nimport AuthProvider from \"./context/auth\";\nimport PrivateRoute from \"./components/PrivateRoute\";\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <BrowserRouter>\n        <Navbar />\n        <Switch>\n          <Route exact path=\"/register\" component={Register} />\n          <Route exact path=\"/login\" component={Login} />\n          <PrivateRoute exact path=\"/profile\" component={Profile} />\n          <PrivateRoute exact path=\"/\" component={Home} />\n        </Switch>\n      </BrowserRouter>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}